<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Date Format</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Date Format Function</h1>
        
        <h3>Test Cases:</h3>
        <div id="test-results"></div>
        
        <h3>Browser Info:</h3>
        <div id="browser-info" class="info"></div>
        
        <h3>Clear Cache Instructions:</h3>
        <div class="info">
            <p><strong>Chrome/Edge:</strong> Ctrl+Shift+R ho·∫∑c F12 ‚Üí Network ‚Üí Disable cache</p>
            <p><strong>Firefox:</strong> Ctrl+Shift+R ho·∫∑c Ctrl+F5</p>
            <p><strong>Safari:</strong> Cmd+Shift+R</p>
        </div>
    </div>

    <script>
        // Function formatDate t·ª´ dashboard.js (manual formatting)
        function formatDate(dateString) {
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) {
                    return 'Invalid Date';
                }
                
                // Manual formatting to ensure consistent DD/MM/YYYY format across all browsers
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                return `${day}/${month}/${year}`;
            } catch (error) {
                console.error('Date formatting error:', error);
                return 'Invalid Date';
            }
        }

        // Function formatDate c≈© (toLocaleDateString)
        function formatDateOld(dateString) {
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) {
                    return 'Invalid Date';
                }
                
                return date.toLocaleDateString('vi-VN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit'
                });
            } catch (error) {
                console.error('Date formatting error:', error);
                return 'Invalid Date';
            }
        }

        // Test cases
        const testCases = [
            '2025-01-07',  // 7/1/2025
            '2025-12-25',  // 25/12/2025  
            '2024-06-15',  // 15/6/2024
            '2024-03-01',  // 1/3/2024
        ];

        function runTests() {
            const resultsDiv = document.getElementById('test-results');
            const browserInfoDiv = document.getElementById('browser-info');
            
            // Browser info
            browserInfoDiv.innerHTML = `
                <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                <p><strong>Language:</strong> ${navigator.language}</p>
                <p><strong>Platform:</strong> ${navigator.platform}</p>
            `;

            let html = '';
            
            testCases.forEach((testDate, index) => {
                const newFormat = formatDate(testDate);
                const oldFormat = formatDateOld(testDate);
                const isCorrect = newFormat.match(/^\d{2}\/\d{2}\/\d{4}$/); // DD/MM/YYYY pattern
                
                html += `
                    <div class="test-result ${isCorrect ? 'success' : 'error'}">
                        <strong>Test ${index + 1}:</strong> ${testDate}<br>
                        ‚úÖ <strong>New Format (Manual):</strong> ${newFormat}<br>
                        üîÑ <strong>Old Format (toLocaleDateString):</strong> ${oldFormat}<br>
                        üìä <strong>Status:</strong> ${isCorrect ? '‚úÖ CORRECT DD/MM/YYYY' : '‚ùå WRONG FORMAT'}
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>